<!DOCTYPE html>
<html th:with="lang=${#locale.language}" th:lang="${lang}" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Eventos</title>

    <th:block th:include="fragments/head :: head"/>
    <script th:src="@{/libraries/js/jquery.dataTables.min.js}" type="text/javascript"></script>
    <link th:href="@{/libraries/css/jquery.dataTables.min.css}" rel="stylesheet" type="text/css" />
</head>
<body>
    <div th:replace="fragments/navbar :: navbar"></div>
    <div class="container">
        <table class="display compact" id="empleados">
            <caption th:text="#{table.description.empleados}"></caption>
            <thead>
            <tr>
                <th th:text="#{empleado.id}" scope="col"></th>
                <th th:text="#{empleado.tipo}" scope="col"></th>
                <th th:text="#{empleado.nombre}" scope="col"></th>
                <th th:text="#{empleado.telefono}" scope="col"></th>
                <th th:text="#{empleado.fijo}" scope="col"></th>
                <th th:text="#{modificar}" scope="col"></th>
                <th th:text="#{eliminar}" scope="col"></th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="empleado, iter: ${empleados}" style="cursor: pointer" onclick="rowClicked(this.getAttribute('eventoId'))">
                <td th:text="${empleado.id}"></td>
                <td th:text="${empleado.tipo}"></td>
                <td th:text="${empleado.nombre}"></td>
                <td th:text="${empleado.telefono}"></td>
                <td th:text="${empleado.fijo}"></td>
                <td>
                    <button th:text="#{modificar}" type="button" class="btn btn-primary" th:empleadoIndex="${iter.index}" onclick="modificarClicked(this.getAttribute('empleadoIndex'))"></button>
                </td>
                <td>
                    <button th:text="#{eliminar}" type="button" class="btn btn-danger" th:empleadoIndex="${iter.index}" onclick="eliminarClicked(this.getAttribute('empleadoIndex'))"></button>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</body>
<script type="text/javascript">
    $('#empleados').DataTable(
        {
            columnDefs: [
                {
                    visible: false,
                    targets: 0
                },
                {
                    orderable: false,
                    targets: [2, 3, 5]
                }
            ],
            searching: false,
            paging: false,
            info: false
        }
    );

    function modificarClicked(empleadoIndex){
        location.href = "/empleados/update?empleadoIndex=" + empleadoIndex;
    }

    function eliminarClicked(empleadoIndex){
        location.href = "/empleados/eliminar?empleadoIndex=" + empleadoIndex;
    }
</script>
</html>